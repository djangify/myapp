{% extends "base.html" %}
{% load static %}

{% block content %}
<!-- HERO SECTION -->
<header>
  {% include 'core/hero.html' %}
</header>

<main class="text-[color:var(--color-font-main)]">

  <!-- Shop Heading -->
  <section class="px-6 md:px-16 py-12 text-center space-y-4">
    <h1 class="text-4xl font-semibold text-[color:var(--color-brand-secondary)] mt-8">
      Latest Products
    </h1>
  </section>

  <!-- Category Pills -->
  <div id="categories-grid" class="flex flex-wrap justify-center gap-3 mb-12 uppercase">
    <a href="{% url 'core:home' %}"
    class="px-4 py-2 rounded-md text-sm font-semibold border border-[color:var(--color-brand-accent)] text-[color:var(--color-brand-dark)] bg-[color:var(--color-brand-light)] hover:bg-[color:var(--color-brand-secondary)] hover:text-[color:var(--color-brand-light)] transition-colors {% if not current_category %}bg-[color:var(--color-brand-secondary)] text-[color:var(--color-brand-dark)] border-[color:var(--color-brand-secondary)]{% endif %}">
    All Products
  </a>
    {% for category in categories %}
    <a href="?category={{ category.slug }}#latest-products"
      class="px-4 py-2 rounded-md text-sm font-semibold border border-[color:var(--color-brand-accent)] text-[color:var(--color-brand-dark)] bg-[color:var(--color-brand-light)] hover:bg-[color:var(--color-brand-secondary)] hover:text-[color:var(--color-brand-light)] transition-colors {% if current_category and current_category.slug == category.slug %}bg-[color:var(--color-brand-secondary)] text-[color:var(--color-brand-light)] border-[color:var(--color-brand-secondary)]{% endif %}">
      {{ category.name }}
    </a>
    {% endfor %}
  </div>

  <!-- PRODUCT GRID -->
  <!-- LATEST PRODUCTS (Top 4) -->
<section id="latest-products" class="py-12">
  <div class="max-w-7xl mx-auto px-6 md:px-12">
    {% if latest_products %}
    <div class="grid gap-8 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4">
      {% for product in latest_products %}
      <div class="border border-[color:var(--color-brand-accent)] rounded-lg p-4 hover:shadow-md transition-shadow duration-300 flex flex-col justify-between">
        <a href="{{ product.get_absolute_url }}">
          <figure class="mb-4 aspect-[3/4] flex items-center justify-center overflow-hidden rounded-md">
            {% if product.get_image_url %}
              <img src="{{ product.get_image_url }}" alt="{{ product.title }}" class="object-contain w-full h-full">
            {% else %}
              <img src="{% static 'images/placeholder.webp' %}" alt="Placeholder" class="object-contain w-full h-full">
            {% endif %}
          </figure>
          <h3 class="text-lg font-semibold text-[color:var(--color-brand-primary)] mb-2">{{ product.title }}</h3>
        </a>
        <div class="flex justify-between items-center mt-auto">
          <span class="text-lg font-semibold text-[color:var(--color-brand-accent)]">
            £{{ product.current_price }}
          </span>
          <a href="{{ product.get_absolute_url }}"
             class="text-sm uppercase border border-[color:var(--color-brand-secondary)] text-[color:var(--color-brand-secondary)] px-3 py-1.5 rounded hover:bg-[color:var(--color-brand-secondary)] hover:text-[color:var(--color-brand-light)] transition-colors">
            View
          </a>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <p class="text-center text-[color:var(--color-font-main)]">No latest products available at the moment.</p>
    {% endif %}
  </div>
</section>

    <!-- Free Download / Product CTA -->
    <!-- Free Download / Product CTA -->
<section class="mt-16 mb-12 px-4 sm:px-6">
  <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 items-center gap-8 bg-[color:var(--color-brand-light)] border border-[color:var(--color-brand-accent)] rounded-2xl p-6 sm:p-8 md:p-10 shadow-sm">

    <!-- Text Section -->
    <div class="md:col-span-2 space-y-4">
      <h2 class="text-2xl md:text-3xl font-semibold text-[color:var(--color-brand-primary)] leading-snug">
        Free Download: AI Search Readiness Checklist
      </h2>
      <p class="text-[color:var(--color-font-main)] md:text-lg">
        Discover how to make your website AI-ready. This quick-action checklist helps you structure your pages, add FAQs, and use schema so search engines and AI tools recognise your expertise. Ideal for creators, service providers, and small business owners who want more visibility without paid ads.
      </p>

      <ul class="list-disc list-inside text-[color:var(--color-font-main)] space-y-1 md:text-base">
        <li> Identify your 3–5 core topics</li>
        <li> Build SEO cluster pages that AI can understand</li>
        <li> Add schema and FAQs for rich results</li>
        <li> Fix the technical basics that hold sites back</li>
      </ul>

      <div class="flex flex-wrap gap-3 pt-3">
        <a href="/media/public/pdf/ai-search-checklist.pdf"
          class="inline-flex items-center uppercase border-2 border-[color:var(--color-brand-primary)] bg-[color:var(--color-brand-primary)] text-[color:var(--color-brand-light)] text-xs sm:text-sm px-5 py-4 rounded font-semibold hover:bg-[color:var(--color-brand-secondary)] transition">
          Download The Checklist
        </a>

        <a href="{% url 'core:home' %}#latest-products"
          class="inline-flex items-center px-5 py-4 rounded-md border border-[color:var(--color-brand-accent)] text-[color:var(--color-brand-dark)] bg-[color:var(--color-brand-light)] font-medium hover:bg-[color:var(--color-brand-secondary)] hover:text-[color:var(--color-brand-light)] transition uppercase">
          Explore Our Shop
        </a>
      </div>
    </div>

    <!-- Image Preview -->
    <div class="hero-image-wrapper flex justify-center lg:justify-end mt-8 lg:mt-0">
      <div class="rounded-xl overflow-hidden border border-[color:var(--color-brand-accent)] bg-[color:var(--color-brand-light)] w-full max-w-[380px] md:max-w-[380px] lg:max-w-[420px] mx-auto">
        <img src="{% static 'images/creative-solo.webp' %}" 
             alt="AI Search Readiness Checklist Preview"
             class="hero-image object-cover w-full h-auto">
      </div>
    </div>
  </div>
</section>


      <!-- Featured Highlights -->
    <section class="mt-20 mb-16 px-4 sm:px-6">
      <div class="max-w-6xl mx-auto">
        

        <div class="featured-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-4 sm:gap-y-6">

          {# --- First About Us block --- #}
          <div class="bg-[color:var(--color-brand-light)] border-2 border-[color:var(--color-brand-secondary)]  p-6 text-center flex flex-col justify-center hover:shadow-md transition">
            <h2 class="text-3xl font-semibold text-[color:var(--color-brand-secondary)] mb-8 text-center">
          From Ideas to Income
        </h2>
            <p class="text-[color:var(--color-font-main)] leading-relaxed my-2 sm:my-0">
              <p>You have the ideas - Djangify gives you the systems to sell them online. From your first setup to refining what already works, our guides help you build an online presence that attracts customers, drives sales, and builds sustainable income over time.
            </p>
          </div>

          {# --- Featured products loop --- #}
          {% for product in featured_products %}
          <div class="bg-[color:var(--color-brand-light)] border-2 border-[color:var(--color-brand-secondary)] overflow-hidden hover:shadow-md transition flex flex-col p-2">

            <a href="{{ product.get_absolute_url }}">
              {% if product.get_image_url %}
                <img src="{{ product.get_image_url }}" alt="{{ product.title }}" class="w-full aspect-[2/3] max-h-[180px] object-cover">

              {% else %}
                <img src="{% static 'images/placeholder.webp' %}" alt="{{ product.title }}" class="w-full h-56 object-cover opacity-70">
              {% endif %}
              
            </a>
          </div>
          {% endfor %}

          {# --- Second About Us block --- #}
        {% comment %} <div class="bg-[color:var(--color-brand-light)] border-2 border-[color:var(--color-brand-secondary)] p-6 text-center flex flex-col justify-center hover:shadow-md transition 
        col-span-1 sm:col-span-2 md:col-span-2 lg:col-span-2 my-0">
          <h3 class="text-xl font-semibold text-[color:var(--color-brand-primary)] mb-2">
            Second Box Two Spaces
          </h3>
          <p class="text-[color:var(--color-font-main)] leading-relaxed max-w-2xl mx-auto">
            This box needs to take up two columns in this space here.
          </p>
        </div> {% endcomment %}

        </div>
      </div>
    </section>

    <!-- PRODUCT GRID -->
  <section id="shop" class="py-12">
    <div class="max-w-7xl mx-auto px-6 md:px-12">
      {% if products %}
      <div class="grid gap-8 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4">
        {% for product in products %}
        <div class="border border-[color:var(--color-brand-accent)] rounded-lg p-4 hover:shadow-md transition-shadow duration-300 flex flex-col justify-between">
          <a href="{{ product.get_absolute_url }}">
            <figure class="mb-4 aspect-[3/4] flex items-center justify-center overflow-hidden rounded-md">
              {% if product.get_image_url %}
                <img src="{{ product.get_image_url }}" alt="{{ product.title }}" class="object-contain w-full h-full">
              {% else %}
                <img src="{% static 'images/placeholder.webp' %}" alt="Placeholder" class="object-contain w-full h-full">
              {% endif %}
            </figure>
            <h3 class="text-lg font-semibold text-[color:var(--color-brand-primary)] mb-2">{{ product.title }}</h3>
          </a>
          <div class="flex justify-between items-center mt-auto">
            <span class="text-lg font-semibold text-[color:var(--color-brand-accent)]">
              £{{ product.current_price }}
            </span>
            <a href="{{ product.get_absolute_url }}"
               class="text-sm uppercase border border-[color:var(--color-brand-secondary)] text-[color:var(--color-brand-secondary)] px-3 py-1.5 rounded hover:bg-[color:var(--color-brand-secondary)] hover:text-[color:var(--color-brand-light)] transition-colors">
              View
            </a>
          </div>
        </div>
        {% endfor %}
      </div>

      
      {% if products.has_other_pages %}
      <div class="mt-12">
        <nav class="flex justify-center flex-wrap gap-2">
          {% if products.has_previous %}
          <a href="?page={{ products.previous_page_number }}"
             class="px-4 py-2 text-sm border border-[color:var(--color-brand-accent)] rounded-md bg-[color:var(--color-brand-light)] hover:bg-[color:var(--color-brand-secondary)] hover:text-[color:var(--color-brand-light)] transition-colors">
             Previous
          </a>
          {% endif %}
          {% for num in products.paginator.page_range %}
            {% if products.number == num %}
            <span class="px-4 py-2 text-sm rounded-md bg-[color:var(--color-brand-accent)] text-[color:var(--color-brand-light)] border border-[color:var(--color-brand-accent)]">{{ num }}</span>
            {% else %}
            <a href="?page={{ num }}#latest-products"
               class="px-4 py-2 text-sm rounded-md border border-[color:var(--color-brand-accent)] bg-[color:var(--color-brand-light)] hover:bg-[color:var(--color-brand-secondary)] hover:text-[color:var(--color-brand-light)] transition-colors">
               {{ num }}
            </a>
            {% endif %}
          {% endfor %}
          {% if products.has_next %}
          <a href="?page={{ products.next_page_number }}"
             class="px-4 py-2 text-sm border border-[color:var(--color-brand-accent)] rounded-md bg-[color:var(--color-brand-light)] hover:bg-[color:var(--color-brand-secondary)] hover:text-[color:var(--color-brand-light)] transition-colors">
             Next
          </a>
          {% endif %}
        </nav>
      </div>
      {% endif %}
      

      {% else %}
      <p class="text-center text-[color:var(--color-font-main)]">No products available at the moment.</p>
      {% endif %}
    </div>
 
</main>

<!-- JS -->
<script src="{% static 'js/category-filter.js' %}"></script>
{% endblock %}
